[Unknown] はい 、 それ で は 今月 の ピース分 の 名 位置 教科 始め て いき たい と 思い ます 。
[Unknown] よろしく お 願い し ます 。
[Unknown] で 、 えっ と 、 今回 は 、 まあ 、 なん か よそ で 色々 イベント が ある ん です けど 、 うち は で も ちょっと やっ て みよう ぜっ て いう こと で 、 まあ 、 なん か 最強 の データ 基盤 を なん か ちょっと 喋っ て みよう じゃ ない か みたい な 話 で 取り組み を やっ て み たい な と 思っ て ます 。
[Unknown] はい 。
[Unknown] で 、 えっ と まあ と 、 えっ と 、 ナレチ 共有 会 と し て は データ 基盤 の LT 大会 の 話 と 、 あと 最近 あの プリセ で こんな 感じ の 構成 図 えっと 、 プリセ の 案件 の 構成 図 こんな 感じ だ よ みたい な 話 を 軽く 紹介 しよう か な と 思い ます 。
[Unknown] で 、 えっ と 、 フィードバック は 前回 から こう し てる ん です けど 、 スラック の スレッド に 色々 書い て 欲しい です 。
[Unknown] で 、 まあ 、 スレッド の 中身 と か 追い ながら あの 、 こう 回答 し たり と か 、 コード で やり取り も し て いこう か な と 思い ます 。
[Unknown] で 一旦 LT 大会 、 LT 会 の 方 は 勢い の 方 が 大事 か な と 思う ん で 、 一旦 あの 、 今 えっ と 、 タスク フォース の メンバー 3 人 の 分 一気 に 流し て から 、 また ちょっと 溜まり 次第 で QA みたい な もの が あれ ば ちょっと 喋る か な ぐらい な 感じ です ね 。
[Unknown] まあ 、 そんな に あの 、 色々 詰め た 構成 じゃ ない の で あの 、 ネタ も あり な の で はい 。
[Unknown] あんまり 深く は 突っ込ま ない で ねっ て 感じ です 。
[Unknown] です 。
[Unknown] はい 。
[Unknown] まあ 、 実際 に やる 時 は この 辺 気 を つけ ない と な みたい な 話 と か は 書い て もらえる と 嬉しい か な と 思い ます 。
[Unknown] はい 。
[Unknown] で は 早速 始め たい と 思い ます 。
[Unknown] と 、 この 最強 データ 基盤 LT 会 は 、 まあ 、 大体 時間 3 分 から 5 分 ぐらい で 、 えっ と 、 まあ 、 貴重 の 空論 で も 何 で も あり だ よ みたい な 話 を し て ます 。
[Unknown] で 、 見 た 目 みんな 一緒 だ と ちょっと つまん ない か な と 思っ て 、 プレゼン スライド の クラメソ 標準 って いう もの の 使用 だけ NG に し て ます 。
[Unknown] はい 、 と いう わけ で 順番 を ランダム に 決め て いき たい と 思い ます が 、 大丈夫 です か ?
[Unknown] 締め切り ます よ 。
[Unknown] 他 に 参加 し たら 大丈夫 です か ね 。
[Unknown] はい 、 まず なさ そう な の で 、 じゃあ どう しよう か な 。
[Unknown] うーん と 、 なん か 何 回 、 何 回 シャッフル する か ?
[Unknown] もう いっ か 、 1 回 で いっ か 。
[Unknown] はい 。
[Unknown] ポチッとな 。
[Unknown] はい 、 と いう わけ で この 順 に なり まし た の で 、 この 順 で 進め て いき たい と 思い ます 。
[Unknown] で は 早速 です ね 、 笠間 さん から です ね 、 画面 共有 外す の で お 願い し ます 。
[笠間] はい 。
[笠間] ええ 。
[笠間] これ か 。
[笠間] 画面 見え て ます か ね ?
[Unknown] はい 、 大丈夫 です 。
[笠間] はい 、 ありがとう ござい ます 。
[笠間] はい 、 じゃあ まず 私 の LT から 始め させ て いただき ます 。
[笠間] で 、 えっと この 最新 最強 アーキテクチャ を 考え て みる 回 って いう ところ で すい ませ ん 。
[笠間] ちょっと 私 も なん だ な 、 この アーキテクチャ が 実現 できる の か どう か まで は 考え きれ て ない の で 、 突っ込みどころ あっ たら あの 、 コメント くださ いっ て いう ところ と 、 あと は 結構 1 ヶ月 前 に 考え た 内容 な の で 、 ちょっと あんまり 覚え て ない ところ も ある の で はい 、 そこ は ご 了承 ください と いう ところ です 。
[笠間] はい 。
[笠間] で 、 えっ と 、 目次 と し て は 前提 条件 が あっ て 、 で 、 アーキテクチャ で 、 DWH 選定 基準 と なぜ アイスバーグ 、 ま 、 アイスバーグ を 選定 し た の です が 、 なぜ アイスバーグ か と いう ところ と 、 あと は データ の 取り込み 方法 に つい て ちょろっと 書い て ます 。
[笠間] はい 。
[笠間] で 、 前提 と し て は、 A ベス アカウント 上 に データ アーキテクチャ を 構築 する こと を 前提 と し て い て 、 で 、 マルチ アカウント 構成 を え 、 想定 し て い ます と 。
[笠間] で 、 A ベス アカウント も 、 ま 、 デブ ステージ プロド で 、 え 、 スナウフレーク アカウント を 分ける 。
[笠間] ま 、 これ は セキュリティ リスク で あっ たり 環境 破壊 リスク を 提言 する ため と 書い て ます 。
[笠間] はい 。
[笠間] で 、 えっ と 、 データ オプス で あっ たり データ 品質 、 メタ データ 管理 も し たい なっ て いう ところ で 、 あと は 、 ま 、 今後 も データ 量 は 増える 見込み 。
[笠間] で 、 将来 的 に は 自然 言語 で データ 活用 者 BIML が データ 閲覧 し たい て いう 前提 を 置い て ます 。
[笠間] はい 、 で 、 えっ と 、 考え た アーキテクチャ が こちら で なん か これ は 大体 いろんな なん だろう な 勉強 会 と か 見 てる と 大体 こんな 感じ な の か なっ て 思っ た 内容 を まとめ た 形 です 。
[笠間] で 、 えっ と 、 あ 、 上 の ここ に 順序 書い て ある ん です けど まず ステップ ファンクションズ が イベント ブリッジ で スケジュール 起動 し ます と 。
[笠間] で 、 その 中 で ここ の ステップ ファンクションズ が 起動 し て 、 で 、 そこ で 、 ま 、 ラムダー で あっ たり アップ フロー で データ ソース から データ 取得 し て S 3 に 格納 し ます と 。
[笠間] で 、 えっ と 、 次 に Amazon 、 え 、 アテナ で マ SQL で アイスバーグ テーブル へ マージ し ます 。
[笠間] ここ です ね 。
[笠間] アイスバーグ テーブル へ マージ を し て で 、 4 番 と し て 、 えっ と で の 加工 と し て DBT を 使っ て 、 ま 、 アイスバーグ テーブル から え 、 マート を え 、 作り出し て 、 で 、 その マート を 最終 的 に は ユーザー が 参照 するっ て いう ところ を 想定 し て い ます 。
[笠間] で 、 えっ と 、 ここ で 書い て ある GitHub アクションズ に つい て は 、 ま 、 PR が マ GitHub で 、 えっ と 管理 する こと を 想定 し て いる の で 、 PR が マージ し た 際 に え 、 トリガー に デプロイ を し たり と か 、 あと は ま 、 その 際 は DBT の ユニット テスト を ラン する イメージ で い ます 。
[笠間] で 、 実装 に つい て は 、 え 、 全て テラフォーム で 行う と いう ところ を 考え て ます と 。
[笠間] で 、 これ は なん か スノー フレーク で も あの 、 ライブラリー と か 使え ば テラフォーム で 書ける みたい な 話 を 聞い た の で ま 、 A の 構成 と 合わせ て まとめ て テラフォーム で やっ て も いい の か なっ て いう 考え です 。
[笠間] で 、 DBT に つい て は 、 ま 、 その まま DBT の プロジェクト フォルダー で DBT 基本 に 乗っ取 るっていう ところ です 。
[笠間] で 、 えっ と 、 エレメンタリー と か セレクト で 、 ま 、 データ 品質 で あっ たり コスト の 監視 と いう ところ を 書い て い ます 。
[笠間] はい 。
[笠間] で 、 DWH の 選定 基準 と し て は 、 えっ と 、 まず 候補 と し て は レッド シフト オン デマンド サーバーレス ビック クエリ スノーフレーク を 考え て い まし て 、 で 、 オンデマ レッド シフト オンデマンド に つい て は 、 ま 、 クラスター 料金 は 高い の と 、 あと は リザーブド インスタンス を 活用 する 場合 は スペック の 調整 が 難しい か な と 思っ て いる の と 、 あと は 生成AI と の 連携 で ま 、 他 と 比べ て やや 手遅れ てる 感 が ある か なっ て いう 所感 です 。
[笠間] で 、 サーバーレス に つい て は 10km 課金 です が 、 データ 量 が 増える と コスト が ちょっと 高い の か な と 思っ て ます 。
[笠間] で 、 ピック クエリ に つい て は レッド シフト と 比較 する と コスト が 安い の と 、 あと は 生成AI と 分析 者 体験 は え 、 Google クラウド で さ 充実 し てる の か な と 思っ て ます 。
[笠間] はい 。
[笠間] で 、 スノー フレーク に つい て は 、 ま 、 レッド シフト と 比較 する と 比較的 コスト は 安く 抑え られる か な と 考え て い まし て ま 、 あと は マルチ クラウド 対応 な の で、 A 上 で 運用 が できる と 思っ て ます 。
[笠間] あと は そう です ね 、 ス に つい て は ストリーム リッド と の 統合 で あっ たり 、 AI 関連 の 機能 、 あと は ダイナミック テーブル など 比較的 アップデート が 早く 提供 さ れ て 印象 な の か 、 ま 、 プラス 点 です と 。
[笠間] で 、 ま 、 最終 的 な 考え と し て は 、 A ベス アカウント 上 の ストレージ を 使用 できる かつ コスト が ま 、 レッド シフト より は 安い スノー フレーク を 選定 て いう ところ です 。
[笠間] で 、 なぜ アイスバーグ かって いう ところ は まあ 、 最終 的 に ベンダー ロック イン みたい な 形 で スノー フレーク に ずっと ロック イン さ れる こと も 良く ない か な と 思う の で 、 え 、 アイスバーグ で 、 まあ 、 オープン ソース フォーマット な の で 乗り換える こと も できる か な と 思っ て アイスバーグ を 選ん だ の と 、 あと は ヘベス の 場合 です と S 3 テーブル など の 新 サービス と の 互換 性 が ある の も いい 点 か な と 思っ て ます 。
[笠間] で 、 データ 取り込み 方法 に つい て の 考え と し て は 、 まず は 最初 に ノー コード 等 の 最小 限 の 実装 で でき ない か を 検討 し ます 。
[笠間] ま 、 例えば ゼロETL と か スノーパイプ と か 、 ま 、 アップ フロー と か 、 そう いっ た もの が ある と 思い ます 。
[笠間] で 、 それ で でき ない 時 に 、 まあ 、 実装 で 作り 込 むっ て こと を 考える 想定 で い ます 。
[笠間] はい 。
[笠間] すい ませ ん 、 短い です が 、 以上 に なり ます 。
[Unknown] はい 、 ありがとう ござい ます 。
[Unknown] で は 続い て その まま 長松 さん に 行き たい と 思い ます 。
[Unknown] 何か 確認 、 これ こう だ よ ね みたい な 話 と か あれ ば スラック の スレッド の 方 に 書い て いて ください 。
[Unknown] じゃあ 、 あ 、 長松 さん 行け ます か ね ?
[長松] はい 。
[長松] ちょっと 待っ て ください ね 。
[長松] 最近 なん か iPhone の なん か iPhone が 調子 悪く て 大丈夫 そう です ね 。
[長松] あ 、 大丈夫 そう 。
[長松] 時間 が ない から ちょっと 。
[長松] あれ ?
[長松] 聞こえ て ます か ?
[Unknown] はい 、 聞こえ て ます 。
[長松] あ 、 ありがとう ござい ます 。
[長松] はい 。
[長松] はい 、 じゃあ ちょっと 私 の 方 は なん か 多分 笠間 さん と か 見か さん ほど っ た も のっ て 言う か 結構 既存 に 既存 の 空路 に 近い もの です と いう ところ です 。
[長松] で 、 えっ と 、 個人 的 に 、 あの はい 、 なん か ダックデー ビっ て いう ところ 気 に なっ て て 、 なん か 実際 に ダックデー B で できる アーキテクチャ っ て いう か 、 基盤 みたい な もの も あっ たり する ん じゃ ない か な みたい な ところ で 、 はい 。
[長松] ここ ら 辺 は ちょっと 私 も 基準 調査 で 書い てる もの な ん で 、 あの エンジニア の 皆 さん と か 多分 使っ てる 方 い たら 、 あの 突っ込み いただい て も 大丈夫 で すっ て いう ところ です 。
[長松] はい 。
[長松] 1 定期 タイ ト ルっ て いう か 、 あの データ 分析 基盤 と 2 つ なん か はい 。
[長松] 基盤 って いう か ツール みたい な もん な の か なっ て いう ところ で ツール みたい な 感じ に し て ます 。
[長松] で 、 私 も もう 1 ペラ ぐらい で はい 、 あの 、 メモ 書き 程度 に なっ て ます 。
[長松] で 、 なん か 想定 する 要求 と し て 、 あの ま 、 クリセ で も 意見 あっ た ん す けど 、 こう なん か 実際 に データ 、 お 客 さん の データ を 見 たら あの 、 大 規模 な デー タっ て いう か 、 もう アプリログ と か 、 こう なん か Excel で 見 たり と か 、 こう 小 規模 な データ サイズっ て いう ところ が はい 、 もし はまっ たら 、 うん ダックデー B みたい な ところ を 入れる こと で なん か でき ん の か なっ て 思っ て たり し ます 。
[長松] で 、 ま 、 1 番 は こう なん か 元々 Excel 運用 みたい な ところ も もし か し たら お 客 さん の 余計 に あっ たり する か な と 思っ て で 、 ただ なん か やっぱ うん と 、 Excel 使っ てる もの ある から 、 こう ランニング コスト は もう なん か A の サービス と か 使う より 避け たい みたい な ところ が あっ たり し たら 、 はい 。
[長松] こう いっ た 構成 も ある か なっ て ところ で 書い て ます 。
[長松] で 、 あの 、 さっき の ところ 、 あ 、 さっき のっ て いう か 、 この あの 、ズーム みたい な ところ は 大きく ダックデー B の 使い 方 って 2 つ ぐらい ある の か な と 思っ て い て ま 、 単純 に 軽量 な ETL と し て 、 えっと コンピューティング と し て ダムダ と か で ダックデー を 動かす イメージ 。
[長松] で 、 この 時 は 、 まあ 、 データ ソース と し て RDBMS ダック デビー と か マ SQL と か ポスグリ しか 、 あと SQL と か も 、 あの 、 サポート し てる みたい な とこ も あっ て 、 あと https か 、 もう API と し て サポート し てる とこ も ある ん で 、 そう いっ た とこ の データ ソース が あっ た 場合 は ダックデー を 、 はい 、 あの 、 コンピューティング と し て 動かし て S 3 に 格納 する みたい な ところ が はい 、 あの 提案 と し て あっ たり する か な と 思っ て ます 。
[長松] で 、 ここ 基本 的 に なん か あの 、 言語 ごと に Python と か も 、 あの 、 サポート し て みたい な ん で 、 ま 、 Python API の イメージ て とこ で 、 で 、 あと 、 ま 、 ここ の ところ が パンダス の 大体 って いう か 、 SQL ベース の 加工 に えっと 、 でき たり する か なっ て 。
[長松] お 客 さん が こう Python って いう か 、 なん か SQL 列 と か ここ の 部分 出し て みたい な ところ も でき たり する か なっ て ところ 。
[長松] で 、 あと ダックデービー の あの サポート し てる ファイル が 、 あの CSV JSON と か は 、 あの 他 の ツール と か す けど 、 パーケ と か も サポート し て Excel も サポート し てる みたい な ん で 、 それ を まあ 、 この Sファイ に て 一応 ファイル 構成 と し て 、 あの ツア も ある か なっ て 思っ て ます 。
[長松] で 、 えっ と 、 ま 、 ここ BI みたい な とこ 特に 儲け ず みたい な とこ ある ん す けど えっ と 、 利用 と し て 、 あの 一般 的 、 一般 的 って いう か 、 こう 私 が 調べ た 中 で 、 ま 、 ローカル 環境 で ダック デビュー 動かす ところ が あっ たり する か な と 思っ て 、 ここ は もう クライアント の シアルズ の 分析 で 用 イメージ みたい な ところ で あの 、 ダック デビュー の あの 、 強み みたい な とこ で SL の ファイル 直接 参照 でき たり する ん で 、 ま 、 そこ を あの 見 に 行っ て で 、 あと 分析 用 の スキル と か も あの 、 サポート し てる みたい な ん で 、 え 、 CT と か も サポート し てる みたい な ん で 、 単純 に そう いっ た 使い 方 も あっ たり する か な と 思っ て ます 。
[長松] はい 。
[長松] これ を この、 この 一連 の 構成 って 言う か は 、 ま 、 どっち か だっ たり 、 ま 、 本 に よっ て は 、 あの 、 2 つ 使え たり する か なっ て 思っ て たり し ます 。
[長松] で 、 一応 この なん か 、 あの 、 ジェイソン と か CSV の あらかじめ テーブル 定義 みたい な とこ も し なく て 、 あの 、 隙間 を 推測 し て くれる みたい な ところ も ダック デビー の あの 、 利点 と し て ある みたい な ん で 、 はい 、 そこ も うまく 生かせれ ば いい の か な みたい な 思っ て ま 、 どう 言っ て じゃあ 実際 どれ ぐらい の もの を 処理 できる の か が 多分 はい 、 ポイント か なっ て 思っ て ん です けど 、 ここ も なん か 私 試し て なく て 調べ た 情報 に よる と みたい な ん です けど あの 、 ある 程度 の 大き さ 数 が 数百MB か GB だっ たら 処理 できる みたい な ところ は ブログ と か あっ たり するっ て 。
[長松] ただ 逆 に こう ファイル 数 って いう か オブジェクト 数 が 多い と 重く なる みたい な ところ も あっ たり する ん で ま 、 これ は 何 て 言う ん です か ね 、 ファイル 設計 みたい な とこ に なる か な と 思っ て ます 。
[長松] で 、 あと こっち の 参考 ール いっぱい 、 あの 、 一応 私 が 見 た 記事 を 書い て み た ん です けど 結構 なんか アテナ の 大体 手段 と し て の アプローチ が 、 あの 、 ある みたい で 例えば なん か いわゆる か ALB の 、 あの 、 ログ 解析 と か 、 あの 、 アテナ で やっ てる パターン が 昔 、 昔 って か 今 も ある の か な ?
[長松] あの 、 結構 ある の か な と 思っ て ん です けど 、 その 大体 手段 と し て の アプローチ も ある みたい な ん で ま 、 本当 に なん か こう なん だ 、 D デビッチ を 入れる まで も なく 本当 に 簡易 的 な 分析 を する ぐらい に なっ たら こう 用途 と し て ダック デビ みたい な ところ も ま 、 1 つ の 案 と し て 考え て て も いい の か な みたい な ところ で 、 はい 。
[長松] 私 は 、 はい 。
[長松] ちょっと こう いっ た ハードル を ちょっと 下げ た 、 下げ た ちょっと LT と なり ます 。
[長松] はい 。
[長松] ちょっと 早い です が 、 私 も 以上 に なり ます 。
[Unknown] はい 、 ありがとう ござい ます 。
[Unknown] 悪デー B その もの の 解説 って いう か どう いう もの か が 伝え られ たら いい か な と 思う ん です けど 喋れ ます か ね ?
[長松] ブログ を 様々 読む みたい な 感じ です けど 。
[長松] 私 も ちゃんと 使っ て ない ん で なん と 思っ て か ん です けど 。
[長松] ちょっと 待っ て ね 。
[長松] この 記事 が 良かっ た ん だ な 。
[長松] ちょっと 。
[長松] この 参考 ール の どっ か に あっ た ん だ よ な 。
[長松] この 記事 が なん か 意外 と 、 まあ 、 シンプル に 書か れ てる の か なっ て 思っ て い ます ね 。
[長松] す ね 。
[長松] ここ で 書い て ダック デビー この 、 ま 、 ちょっと 読み上げる だけ みたい な か も しれ ん です けど 、 えっ と 基本 的 に は 、 あの リショナルデータベース て いう ところ が ベース に なる の か な と 思う ん です けど ま 、 ここ が 要 は あの 、 えっと オン ライン 分析 を ラップ の あの 、 用途 に 最適 化 さ れ てる デビ みたい な ところ で 最近 、 あの 、 出 て き てる の か な と 思っ て ます 。
[長松] ま 、 ここ ら 辺 、 ああ 、 ごめん なさい 。
[長松] ここ ら 辺 か な 。
[長松] まあ 、 ちょっと 、 あの 、 私 も 事前 に 試し て な いっ て ところ も 、 はい 、 ある ん です けど ここ ら 辺 か な ?
[長松] あの 、 方法 と し て 、 で 、 データ ファイル が 、 あの 、 さっき あげ た ファイル の サポート だっ たり 、 あの、 HTTP で アクセス できる だっ たり 。
[長松] あと 、 ここ 言っ た 通り S 3 と か の 、 あの 、 ストレージ 上 の データ ファイル を 直接 参照 できる みたい な ところ が あり ます と いう ところ です ね 。
[長松] と いっ た ところ に 、 あの 、 Python と か コー の クライアント ライブラリー も ある みたい な ん で 、 そう いっ た ところ が ポイント な の か な と 思っ て ます 。
[Unknown] はい 。
[Unknown] はい 。
[Unknown] です か ?
[Unknown] はい 。
[Unknown] はい 、 で は 長 さん ありがとう ござい まし た 。
[Unknown] で は 僕 の カード です ね 。
[Unknown] はい 。
[Unknown] 開い て た の ついで に スレ に 貼っ とき ます ね 。
[Unknown] はい 。
[Unknown] で は 僕 の やつ を やり たい と 思い ます 。
[Unknown] よろしく お 願い し ます 。
[Unknown] はい 。
[Unknown] で は 最強 の データ 基盤 と 題し て 、 えっ と 、 物理 構成 編 と 論理 構成 編 で 分け て 書い て ます 。
[Unknown] で 、 物理 構成 編 は 使う サービス の 構成 と か の 話 で 、 論理 構成 編 は 処理 の 組み 方 の 話 です 。
[Unknown] で 、 まず 物理 構成 編 です ね 。
[Unknown] と 、 えっ と 、 コンセプト は アテナ アイスバーグプラス スノー フレーク の カタログ 統合 を コンセプト に し て ます 。
[Unknown] で 、 えっ と 、 スノー フレーク は アイスバーグ テーブル の カタログ を グルー データ カタログ と 統合 する こと が でき ます 。
[Unknown] で 、 えっ と 、 ま 、 ドキュメント 見る と 日本 語 ページ だ と プレビュー 状態 な ん です けど 、 英語 標示 だ と 出 て ない ん で 、 多分 GA 済み の はず です 。
[Unknown] で 、 えっ と 、 カタログ 統合 する と グルー データ カタログ 上 の テーブル ま 、 アテナ から 見える テーブル を スノー フレーク から も 見える よっ て いう やつ です ね 。
[Unknown] ま 、 レッド シフト スペクトラム みたい な 感じ です ね 。
[Unknown] で 、 えっ と 、 データ ハイ 先 の S 3 バケット を スノー フレーク の 外部 ステージ と し て 認識 さ せ て おい て 、 で 、 ま 、 カタログ 統合 ついで に やっ とく と 同じ よう に ストレージ も 含め て 見える よう に な るっていう やつ です ね 。
[Unknown] で 、 えっ と 、 これ やる と 、 えっ と 、  空間 から スノー フレーク の 空間 に 対する 明示 的 な 取り込 みっ て いう の が 不要 に なる の で 、 まあ 、 あの あの 共有 の ファイル サーバー みたい な 感じ で どっち から も 見える みたい な 状態 に でき るっていう やつ です ね 。
[Unknown] で 、 えっ と 、 どんな 感じ に なる かって いう と 、 こんな 感じ に なり ます よっ て いう 絵 です ね 。
[Unknown] で 、 データ ソース から 取っ て くる ところ は 変わら ない ん です けど 、 えっ と 、 ETL 2 で 、 えっ と アイスバーグ の テーブル に 書い て おく と 、 それ が スノー フレーク から 見え るって 形 に なり ます 。
[Unknown] で 、 スノー フレーク から は 、 その まま その テーブル を 見る こと も できる し 、 その テーブル を 入力 と し て ETL 3 動かし て データ マート みたい な もの を スノー フレーク の 中 に 作る こと も できる し 、 えっと アテナ 側 に 、 アテナ 側 、 S 3 側 、 アイスバーグ テーブル 側 に 書く こと も でき るっていう ような 形 です 。
[Unknown] で 、 これ やる と スノー フレーク の コンピューター エンジン が 使える の で パフォーマンス が 出し やすかっ たり です と か 、 アクセス 制御 が スノー フレーク に 閉じ たり する ん で 、 あの シングル 採用 の 設定 と か は し やすかっ たり と か 、 あと は ま 、 データ の アクセス の タグ 付け と か が 色々 できる か なっ て いう 感じ です 。
[Unknown] で 、 同じ よう な こと と か やり たく て 、 Aウェス 側 に 、 それ だけ の ため に レイク フォーメーション 入れよう と し てる ケース と か は はまる ん じゃ ない か な と 思っ たり し て ます 。
[Unknown] はい 。
[Unknown] て いう 構成 です ね 。
[Unknown] はい 。
[Unknown] で 、 ここ まで が 前半 の 物理 構成 編 の 話 です 。
[Unknown] で 、 こっ から 論理 構成 編 の 話 です 。
[Unknown] で 、 えっ と 、 まあ 、 つまり ジョブ の オーケストレーション を どう し ましょう ねっ て 話 な ん です けど 、 ま 、 テーブル と か システム が 多い 時 に ジョブ の ワーク フロー を どう いう 単位 で 作成 する の か 問題 って いう の が どの 案件 で も 出 て くる か な と 思い ます 。
[Unknown] で 、 1 つ の 方針 と し て は 全体 で 、 えっと 1 つ 大きな ワークフロー が あっ て 、 で 、 設定 値 を 順繰り 処理 し て い くっ て いう 考え 方 。
[Unknown] と もう 1 個 の 方向 性 は テーブル 単位 で 、 ま 、 取得 から 反映 まで の 1 セット を オーケストレーション し て 、 ま 、 ジョブ を 増やし て いく みたい な 考え 方 です ね 。
[Unknown] ま 、 インフォマティカ と か その 辺 は 、 あの 、 下 の 方針 に の 方向 性 で やっ て たり し ます 。
[Unknown] で 、 この間 の 、 ま 、 グラデーション 、 ま 、 どれ ぐらい の 単位 で まとめ ましょう かって いう の が あっ たり と か が ある か な と 思い ます 。
[Unknown] で 、 この 辺 が 、 えっ と 、 ま 、 データ ソース 単位 ぐらい で まとめ ちゃっ て いい ん じゃ ない か なっ て いう の が 僕 の コンセプト です 。
[Unknown] で 、 テーブル 単位 に フロー を 作っ て いか なきゃ いけ な いっ て なる と 、 ま 、 テーブル 、 ま 、 増え たり 減っ たり する ん で 、 そこ の 辺 が めんど くさかっ たり と か コスト が かかっ たり する の で 、 ま 、 別 に そこ まで 必要 じゃ ない ん じゃ ない か な と 思っ て ます 。
[Unknown] で 、 ま 、 サース と か で やる 方法 が 他 の メリット が ある の で 、 ま 、 しょう が な いっ て する ん だっ たら 、 まあ 、 別 です けど 、 わざわざ そんな に ここ まで 細かく 設定 できる よう に 、 なん か 柔軟 な 構成 が 取れ ま すっ て 言っ て も そんな に 柔軟 な 構成 を 取っ てる ケー スっ て あんまり なかっ たり する の か な と 思う の で いら ない ん じゃ いっ て 思っ たり し て ます 。
[Unknown] で 、 また 全体 で 1 つ に する と 、 ま 、 直列 で 流し て いく こと に なる の で 、 全体 の 開始 から 終了 まで の 時間 が ネック で 、 ま 、 夜 夜中 始め て 朝 まで に 終わる の か 、 終了 開始 まで に 終わる の か みたい な の が ネック に なる か な と 思い ます 。
[Unknown] で 、 な の で 、 えっ と 、 ま 、 データ ソース 単位 ぐらい だっ たら パラレル で アクセス し て も いい でしょう と 思う の で 、 データ ソース 単位 に 起動 トリガー を まとめ たり と か で やっ て 制御 する の が いい ん じゃ ない か なっ て いう アイデア です 。
[Unknown] で 、 並列 アクセス し たかっ た 場合 、 し た 、 えっ と 、 同じ データ ソース に 対し て 並列 で アクセス し たい 場合 は それ まあ 、 もう 1 セット 作っ て、 A グループ 、 B グループ みたい な 感じ に すれ ば とりあえず は できる の か な と 思っ たり し て ます 。
[Unknown] で 、 ま 、 リカバリー と か 考え ない と いけ ない です ねっ て 話 と 、 あと それ 、 その 後 の ETL 3 の マート 作成 の 時 に 、 ま 、 合流 し たり と か 待ち合わせ みたい な の を どう し ましょう ねっ て いう の が ネック に なる か なっ て いう の は ある もの の 、 ま 、 一旦 データ を ざっ と 取っ て き たい みたい な 要望 の 方 が 多い 気 が する ん で 、 これ で いい ん じゃ いっ て いう アイデア です 。
[Unknown] で 、 例えば です けど 、 ま 、 ダイナモ DB の テーブル に 設定 値 載せ て で 、 えっ と 、 データ ソース タイム の コネクター と か 並列 接続 数 設定 できる よう に し て で 、 ま 、 DB ごと 落ち て たら 全部 スキップ し たり と か で 、 前回 成功 し た 日付 持っ て て 、 再 実行 し たら 、 再 実行 し たら 、 えっと 、 失敗 し た やつ だけ 拾っ て き て みたい な こと が できる よう に し たり と か 。
[Unknown] で 、 えっと 、 データ 操作 側 に 履歴 持っ て ない テーブル みたい な の が ある 時 は DWH で 履歴 作る よう に し て と か カム が なん か 知ら ん うち に 増え て たら 警告 出す よう に し て と か て いう の を デ食 で 作り まし たって いう 地 です 。
[Unknown] はい 、 終わり です 。
[Unknown] ありがとう ござい まし た 。
[Unknown] はい 。
[Unknown] それ で は 戻り まし て なん か QA タイム と か あれ ば やろう か な と 思い ます が なん か あり ます か ね ?
[Unknown] そんな に もう すでに スレッド で やり取り が さ れ て いる の で 大丈夫 か な ?
[Unknown] って いう 気 も し ます が 、 なん か 口頭 で 質問 タイム と か 誰 に 対し て これ 聞き たい と か 、 ま 、 複数 人 に 対し て で も いい です けど なん か あれ ば と 思い ます が 。
[Unknown] あ 、 すい ませ ん 。
[Unknown] 今 さん 、 梅沢 です 。
[Unknown] はい 。
[Unknown] はい 。
[Unknown] なん か 会議 中 な ん です けど 、 えっ すい ませ ん 。
[Unknown] 最後 に 今 さん の スライド で えっと 、 大の DB が って いう の を ちょっと 映し て いただい て も いい です か ね 。
[Unknown] はい 。
[Unknown] あ 、 ありがとう ござい ます 。
[Unknown] こ れって すい ませ ん 、 えっ と 、 ちょっと 理解 が 最後 届か なかっ た ん です が 、 えっ と 、 大の DB に 設定 値 を 持っ て て えっと 、 なん か ジョブ が 落ち たら えっと 、 前回 成功 し た 日持っ て て えっと 前回 処理 し た 内容 を が 、 え 、 失敗 し た ジョブ だけ 、 えっと 、 前回 の やつ を 使える みたい な あ 、 そう です ね 。
[Unknown] はい 。
[Unknown] この テーブル は 今日 の 分 終わっ てる から スキップ で みたい な 感じ で 飛ばし ながら 失敗 し た やつ だけ 拾っ て いく みたい な 失敗 し た やつ は なるほど 。
[Unknown] あ 、 そっ か 、 だ から 、 えっ と 、 失敗 し たら なん か その 再 実行 せ ず に もう ちょ 若干 その データ 古く て いい いい みたい な やつ は 昨日 の やつ と か えっと 前回 成功 し てる やつ を もう 使っ ちゃお うっ て いう 理解 で あっ た ん す か ね 。
[Unknown] そう です ね 。
[Unknown] まあ 、 あの 、 まあ 、 明日 狩り取ら れる から いい やっ て する の で も いい し はい 。 その 当日 の 日中 に もう 1 回 じゃあ そこ だけ 再 実行 って やる と 全体 の 再 実行 する と はい 。 えっと 、 昨日 の 夜 拾え なかっ た やつ だけ 拾っ て くる みたい な 動き が できる よう に し て まし た ね 。
[Unknown] うーん 。
[Unknown] なるほど です 。
[Unknown] 例えば その 、 えっ と 、 ジョブ が なん か こう 繋がっ て て 、 えっ と 、 A と B と C って いう ジョブ を こう 連続 で 動かさ ない と いけ ない やつ と かっ て いう のっ て 途中 で B が 失敗 し た 時 に B は 前日 の データ を 持っ て き て えっと 、 その データ を C で 使う みたい な そんな は そんな の で は なく て 、 えっ と 、 に データ を 、 データ ソース か いろんな データ ソース から データ を 持っ て くるっ て いう 部分 の 処理 な の で 、 そんな に ジョブ 感 の 依存 関係 は ない 形 です ね 。
[Unknown] あ 了解 です 。
[Unknown] 了解 です 。
[Unknown] なるほど です 。
[Unknown] ありがとう ござい ます 。
[Unknown] はい 。
[Unknown] さん 。
[Unknown] はい 。
[Unknown] です 。
[Unknown] みか本 さん 向け の 質問 じゃ ちょっと ない じゃ ない 、 ない なく て 、 あの あれ な ん です けど 平野 さん 向け と いう か な じゃ 、 アバー で こう いう ニー ズっ て ない ん です か ね 。
[Unknown] 逆 に 言う と あの みか本 さん が もう 全職 で 作り まし たって 言っ て ん だ けど 結構 強い ニーズ だっ た ん です か ね みたい な て いう 両方 を 伺い し たい 感じ な ん です けど ね 。
[Unknown] ええ 、 さ ん で 言う と 。
[平野] はい 、 はい 。
[Unknown] は 結局 あれ す か ね 、 えっと 、 どこ まで ジョブ が 成功 し て た みたい な 履歴 テーブル を 持っ て て ま 、 やっ て ない とこ だけ え 、 次 の 人 と いう か 失敗 し て も やれ ます よっ て いう よう な 、 その 辺 の 仕組み を の 需要 って いう 感じ です か ね ?
[Unknown] うん 。
[Unknown] まあ 、 あの 、